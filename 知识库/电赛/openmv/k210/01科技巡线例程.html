<!DOCTYPE html> <html><head>
		<title>01科技巡线例程</title>
		<base href="..\..\..\../">
		<meta id="root-path" root-path="..\..\..\../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="云熙 - 01科技巡线例程">
		<meta property="og:title" content="01科技巡线例程">
		<meta property="og:description" content="云熙 - 01科技巡线例程">
		<meta property="og:type" content="website">
		<meta property="og:url" content="知识库/电赛/openmv/k210/01科技巡线例程.html">
		<meta property="og:image" content="知识库\电赛\openmv\k210\photo\pasted-image-20240629150920.png">
		<meta property="og:site_name" content="云熙">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon background-settings-workplace-theme-light-in-the-note background-settings-workplace-theme-dark-in-the-sky background-image-settings-markdown-page-transparent notebook-liked-markdown-page-grid-notebook-1 panel-page-bg-theme-light-wall panel-page-bg-theme-dark-plant layout-style-options-default bt-default-unordered-list default-ol-list-marker list-no-border bt-connected-indent-hover bt-colorful-connected-indent-hover folder-icons remove-arrow bt-toggle-colorful-folder folder-style-change-options-colorful-border folder-colorful-six table-width-100 tag-default admonition-bg-color-same style-options-for-admonition-plugin style-options-for-buttons-plugin dataview-list-style-pacman memos-banner-gradient thino-frosted-style thino-background-default quiet-outline-optimize code-theme-bt-default whole-code-wrap"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="巡线"><p dir="auto">巡线</p></h1><div class="heading-wrapper"><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="前言[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80 &quot;前言的直接链接&quot;)" dir="auto" class="heading" id="前言[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80_&quot;前言的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>前言<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80" rel="noopener" class="external-link" title="前言的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80" target="_blank">​</a></h2><div class="heading-children"><div><p dir="auto">本节的巡线仍然是基于颜色识别，原理是根据摄像头采集到的图像直线与中心偏离的位置计算出偏离角度，这个方法让巡线变得更容易。如果你的CanMV K210连接到机器人（或相关设备），那么机器人（设备）可以直接关键计算角度偏离结果做出相应调整。</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629150920.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629150920.png"></div><p dir="auto"></p></div></div></div><div class="heading-wrapper"><h2 data-heading="实验目的[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84 &quot;实验目的的直接链接&quot;)" dir="auto" class="heading" id="实验目的[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84_&quot;实验目的的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>实验目的<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84" rel="noopener" class="external-link" title="实验目的的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84" target="_blank">​</a></h2><div class="heading-children"><div><p dir="auto">通过编程实现CanMV K210摄像头画面中黑线的偏离角度。</p></div></div></div><div class="heading-wrapper"><h2 data-heading="实验讲解[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3 &quot;实验讲解的直接链接&quot;)" dir="auto" class="heading" id="实验讲解[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3_&quot;实验讲解的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>实验讲解<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3" rel="noopener" class="external-link" title="实验讲解的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3" target="_blank">​</a></h2><div class="heading-children"><div><p dir="auto">本实验对画面是有一定要求的，也就是摄像头采集图像一定要出现唯一1条连续的黑色直线。程序通过对画面切割成三部分，计算每个部分黑色线的中心点X坐标，然后采用加权平均算法估算出直线的偏离位置。通常情况下越靠近底部的地方离摄像头越近，顶部表示远方线段。因此底部的图形权重高。以下下是示意图讲解：</p></div><div><p dir="auto">假设摄像头当前画面的像素是例程的QQVGA分辨率：160（宽）X120（高），左上角坐标为（0,0），然后当前出现直线坐标为（80,120）至（160,0）偏右的直线。上中下三个部分的权重分别为0.1、0.3、0.7（底部图像靠近机器人，权重大，权重总和可以不是1），我们来计算一下其中心值。</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629150940.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629150940.png"></div><p dir="auto"></p></div><div><p dir="auto">上图中Y轴的中点坐标就是60，X坐标加权平均值计算如下：</p></div><div><p dir="auto">X’=（80_0.7+120_0.3+160*0.1）/（0.7+0.3+0.1）=98</p></div><div><p dir="auto">那么直线偏离坐标可以认为是（98,60），图中绿色“+”位置。那么利用反正切函数可以求出偏离角度：a = atan((98-80)/60)=16.7°，机器人相当于实线的位置往左偏了，所以加一个负号，即 -16.7°；偏离角度就是这么计算出来的。<strong>得到偏离角度后就可以自己编程去调整小车或者机器人的运动状态，直到0°为没有偏离。</strong></p></div><div><p dir="auto">本实验主要采用find_blobs函数编程，这个函数在上一节已经有讲述，具体使用方法如下表：</p></div></div></div><div class="heading-wrapper"><h2 data-heading="find_blobs对象[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1 &quot;find_blobs对象的直接链接&quot;)" dir="auto" class="heading" id="find_blobs对象[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1_&quot;find_blobs对象的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>find_blobs对象<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1" rel="noopener" class="external-link" title="find_blobs对象的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1" target="_blank">​</a></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="构造函数" dir="auto" class="heading" id="构造函数"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>构造函数</h3><div class="heading-children"><div><pre class="language-python" tabindex="0"><code class="language-python is-loaded">image<span class="token punctuation">.</span>find_blobs<span class="token punctuation">(</span>thresholds<span class="token punctuation">[</span><span class="token punctuation">,</span> invert<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">[</span><span class="token punctuation">,</span> roi<span class="token punctuation">[</span><span class="token punctuation">,</span> x_stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token punctuation">,</span> y_stride<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token punctuation">,</span> area_threshold<span class="token operator">=</span><span class="token number">10</span>
                 <span class="token punctuation">[</span><span class="token punctuation">,</span> pixels_threshold<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">[</span><span class="token punctuation">,</span> merge<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">[</span><span class="token punctuation">,</span> margin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">[</span><span class="token punctuation">,</span> threshold_cb<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">[</span><span class="token punctuation">,</span> 
                 merge_cb<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">查找图像中指定的色块。返回image.blog对象列表；参数说明：</p></div><div><ul>
<li data-line="0" dir="auto"><code>thresholds</code>: 必须是元组列表。&nbsp;[(lo, hi), (lo, hi), ..., (lo, hi)]&nbsp;定义你想追踪的颜色范围。 对于灰度图像，每个元组需要包含两个值 - 最小灰度值和最大灰度值。 仅考虑落在这些阈值之间的像素区域。 对于RGB565图像，每个元组需要有六个值(l_lo，l_hi，a_lo，a_hi，b_lo，b_hi) - 分别是LAB L，A和B通道的最小值和最大值。</li>
<li data-line="1" dir="auto"><code>area_threshold</code>: 若色块的边界框区域小于此参数值，则会被过滤掉；</li>
<li data-line="2" dir="auto"><code>pixels_threshold</code>: 若色块的像素数量小于此参数值，则会被过滤掉；</li>
<li data-line="3" dir="auto"><code>merge</code>: 若为True,则合并所有没有被过滤的色块；</li>
<li data-line="4" dir="auto"><code>margin</code>: 调整合并色块的边缘。</li>
</ul></div></div></div><div class="heading-wrapper"><h3 data-heading="使用方法[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95 &quot;使用方法的直接链接&quot;)" dir="auto" class="heading" id="使用方法[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95_&quot;使用方法的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>使用方法<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" rel="noopener" class="external-link" title="使用方法的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" target="_blank">​</a></h3><div class="heading-children"><div><p dir="auto">以上函数返回image.blob对象。</p></div><div><pre><code>blob.rect()
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">返回一个矩形元组（x,y,w,h）,如色块边界。可以通过索引[0-3]来获得这些值。</p></div><div><pre class="language-python" tabindex="0"><code class="language-python is-loaded">blob<span class="token punctuation">.</span>cx<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">返回色块(int)的中心x位置。可以通过索引[5]来获得这个值。</p></div><div><pre class="language-python" tabindex="0"><code class="language-python is-loaded">blob<span class="token punctuation">.</span>cy<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">返回色块(int)的中心y位置。可以通过索引[6]来获得这个值。</p></div><div><p dir="auto">更多用法请阅读官方文档：<br>
<a rel="noopener" class="external-link" href="https://developer.canaan-creative.com/canmv/main/canmv/library/canmv/image.html#find-blobs" target="_blank">https://developer.canaan-creative.com/canmv/main/canmv/library/canmv/image.html#find-blobs</a><br>
</p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151716.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151716.png"></div><p dir="auto"></p></div><div><p dir="auto">了解了找色块函数应用方法后，我们可以理清一下编程思路，代码编写流程如下：</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="参考代码" dir="auto" class="heading" id="参考代码"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>参考代码</h2><div class="heading-children"><div><pre class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token comment"># 黑色灰度线巡线跟踪示例</span>
<span class="token comment">#</span>
<span class="token comment">#做一个跟随机器人的机器人需要很多的努力。这个示例脚本</span>
<span class="token comment">#演示了如何做机器视觉部分的线跟随机器人。你</span>
<span class="token comment">#可以使用该脚本的输出来驱动一个差分驱动机器人</span>
<span class="token comment">#跟着一条线走。这个脚本只生成一个表示的旋转值（偏离角度）</span>
<span class="token comment">#你的机器人向左或向右。</span>
<span class="token comment">#</span>
<span class="token comment"># 为了让本示例正常工作，你应该将摄像头对准一条直线（实线）</span>
<span class="token comment">#并将摄像头调整到水平面45度位置。请保证画面内只有1条直线。</span>
<span class="token comment">#</span>
<span class="token comment">#翻译：01Studio</span>

<span class="token keyword">import</span> sensor<span class="token punctuation">,</span> image<span class="token punctuation">,</span> time<span class="token punctuation">,</span> math<span class="token punctuation">,</span> lcd

<span class="token comment"># 追踪黑线。使用 [(128, 255)] 追踪白线.</span>
GRAYSCALE_THRESHOLD <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment"># 下面是一个roi【区域】元组列表。每个 roi 用 (x, y, w, h)表示的矩形。</span>

<span class="token triple-quoted-string string">'''
#采样图像QQVGA 160*120，列表把roi把图像分成3个矩形，越靠近的摄像头视野（通常为图像下方）的矩形权重越大。
ROIS = [ # [ROI, weight]
        (0, 100, 160, 20, 0.7), # 可以根据不同机器人情况进行调整。
        (0,  50, 160, 20, 0.3),
        (0,   0, 160, 20, 0.1)
       ]
'''</span>
<span class="token comment">#采样图像为QVGA 320*240，列表把roi把图像分成3个矩形，越靠近的摄像头视野（通常为图像下方）的矩形权重越大。</span>
ROIS <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token comment"># [ROI, weight]</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 可以根据不同机器人情况进行调整。</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>  <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span>
       <span class="token punctuation">]</span>

<span class="token comment"># 计算以上3个矩形的权值【weight】的和，和不需要一定为1.</span>
weight_sum <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> r <span class="token keyword">in</span> ROIS<span class="token punctuation">:</span> weight_sum <span class="token operator">+=</span> r<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token comment"># r[4] 为矩形权重值.</span>

<span class="token comment"># 摄像头配置</span>
sensor<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 初始化.</span>
sensor<span class="token punctuation">.</span>set_pixformat<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>GRAYSCALE<span class="token punctuation">)</span> <span class="token comment"># 使用灰度图像.</span>
sensor<span class="token punctuation">.</span>set_framesize<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>QVGA<span class="token punctuation">)</span> <span class="token comment"># 使用QVGA 320*240或QQVGA 160*120.</span>
sensor<span class="token punctuation">.</span>set_vflip<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">#摄像头后置模式</span>
sensor<span class="token punctuation">.</span>skip_frames<span class="token punctuation">(</span>time <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token comment"># 等待摄像头稳定.</span>

<span class="token comment">#LCD初始化</span>
lcd<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>

clock <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Tracks FPS.</span>


<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Track elapsed milliseconds between snapshots().</span>
    img <span class="token operator">=</span> sensor<span class="token punctuation">.</span>snapshot<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 实时拍照.</span>

    centroid_sum <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> r <span class="token keyword">in</span> ROIS<span class="token punctuation">:</span>
        blobs <span class="token operator">=</span> img<span class="token punctuation">.</span>find_blobs<span class="token punctuation">(</span>GRAYSCALE_THRESHOLD<span class="token punctuation">,</span> roi<span class="token operator">=</span>r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> merge<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># r[0:4] 是上面定义的roi元组.</span>

        <span class="token keyword">if</span> blobs<span class="token punctuation">:</span>
            <span class="token comment"># Find the blob with the most pixels.</span>
            largest_blob <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>blobs<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> b<span class="token punctuation">:</span> b<span class="token punctuation">.</span>pixels<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token comment"># Draw a rect around the blob.</span>
            img<span class="token punctuation">.</span>draw_rectangle<span class="token punctuation">(</span>largest_blob<span class="token punctuation">.</span>rect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            img<span class="token punctuation">.</span>draw_cross<span class="token punctuation">(</span>largest_blob<span class="token punctuation">.</span>cx<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                           largest_blob<span class="token punctuation">.</span>cy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

            centroid_sum <span class="token operator">+=</span> largest_blob<span class="token punctuation">.</span>cx<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> r<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token comment"># r[4] 是每个roi的权重值.</span>
  
    center_pos <span class="token operator">=</span> <span class="token punctuation">(</span>centroid_sum <span class="token operator">/</span> weight_sum<span class="token punctuation">)</span> <span class="token comment"># 确定直线的中心.</span>

    <span class="token comment"># 将直线中心位置转换成角度，便于机器人处理.</span>
    deflection_angle <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token comment"># 使用反正切函数计算直线中心偏离角度。可以自行画图理解</span>
    <span class="token comment">#权重X坐标落在图像左半部分记作正偏，落在右边部分记为负偏，所以计算结果加负号。</span>

    <span class="token comment">#deflection_angle = -math.atan((center_pos-80)/60) #采用图像为QQVGA 160*120时候使用</span>

    deflection_angle <span class="token operator">=</span> <span class="token operator">-</span>math<span class="token punctuation">.</span>atan<span class="token punctuation">(</span><span class="token punctuation">(</span>center_pos<span class="token operator">-</span><span class="token number">160</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">120</span><span class="token punctuation">)</span> <span class="token comment">#采用图像为QVGA 320*240时候使用</span>

    <span class="token comment"># 将偏离值转换成偏离角度.</span>
    deflection_angle <span class="token operator">=</span> math<span class="token punctuation">.</span>degrees<span class="token punctuation">(</span>deflection_angle<span class="token punctuation">)</span>
    
    <span class="token comment"># 计算偏离角度后可以控制机器人进行调整.</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Turn Angle: %f"</span> <span class="token operator">%</span> deflection_angle<span class="token punctuation">)</span>
    
    <span class="token comment"># LCD显示偏移角度,scale参数可以改变字体大小</span>
    img<span class="token punctuation">.</span>draw_string<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token string">'%.1f'</span> <span class="token operator">%</span> deflection_angle<span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

    lcd<span class="token punctuation">.</span>display<span class="token punctuation">(</span>img<span class="token punctuation">)</span> <span class="token comment">#LCD显示</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span>clock<span class="token punctuation">.</span>fps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 连接计算机后FPS速度减半。</span>

</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">上述代码支持QVGA (320x240) 【默认】和 QQVGA (160x120)两种分辨率，通过下面3处地方修改注释实现。</p></div><div><pre class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token triple-quoted-string string">'''
#采样图像QQVGA 160*120，列表把roi把图像分成3个矩形，越靠近的摄像头视野（通常为图像下方）的矩形权重越大。
ROIS = [ # [ROI, weight]
        (0, 100, 160, 20, 0.7), # 可以根据不同机器人情况进行调整。
        (0,  50, 160, 20, 0.3),
        (0,   0, 160, 20, 0.1)
       ]
'''</span>
<span class="token comment">#采样图像为QVGA 320*240，列表把roi把图像分成3个矩形，越靠近的摄像头视野（通常为图像下方）的矩形权重越大。</span>
ROIS <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token comment"># [ROI, weight]</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 可以根据不同机器人情况进行调整。</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>  <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>   <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span>
       <span class="token punctuation">]</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

sensor<span class="token punctuation">.</span>set_framesize<span class="token punctuation">(</span>sensor<span class="token punctuation">.</span>QVGA<span class="token punctuation">)</span> <span class="token comment"># 使用QVGA 320*240或QQVGA 160*120.</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#deflection_angle = -math.atan((center_pos-80)/60) #采用图像为QQVGA 160*120时候使用</span>

    deflection_angle <span class="token operator">=</span> <span class="token operator">-</span>math<span class="token punctuation">.</span>atan<span class="token punctuation">(</span><span class="token punctuation">(</span>center_pos<span class="token operator">-</span><span class="token number">160</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">120</span><span class="token punctuation">)</span> <span class="token comment">#采用图像为QVGA 320*240时候使用</span>

</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="实验结果[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C &quot;实验结果的直接链接&quot;)" dir="auto" class="heading" id="实验结果[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C_&quot;实验结果的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>实验结果<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C" rel="noopener" class="external-link" title="实验结果的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C" target="_blank">​</a></h2><div class="heading-children"><div><p dir="auto">在CanMV IDE中运行代码，分别观察摄像头采集到没偏移、左偏和右偏各个直线的实验结果。</p></div><div class="heading-wrapper"><h3 data-heading="无偏移[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB &quot;无偏移的直接链接&quot;)" dir="auto" class="heading" id="无偏移[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB_&quot;无偏移的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>无偏移<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB" rel="noopener" class="external-link" title="无偏移的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB" target="_blank">​</a></h3><div class="heading-children"><div><p dir="auto">可以看到偏移角度接近0°；</p></div><div><p dir="auto">画面图片：</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151307.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151307.png"></div><p dir="auto"></p></div><div><p dir="auto">终端结果：</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151327.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151327.png"></div><p dir="auto"></p></div></div></div><div class="heading-wrapper"><h3 data-heading="左偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F &quot;左偏的直接链接&quot;)" dir="auto" class="heading" id="左偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F_&quot;左偏的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>左偏<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F" rel="noopener" class="external-link" title="左偏的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F" target="_blank">​</a></h3><div class="heading-children"><div><p dir="auto">小车或机器人左偏时角度为负数；</p></div><div><p dir="auto">画面图片：</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151403.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151403.png"></div><p dir="auto"></p></div><div><p dir="auto">终端结果：</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151409.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151409.png"></div><p dir="auto"></p></div></div></div><div class="heading-wrapper"><h3 data-heading="右偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F &quot;右偏的直接链接&quot;)" dir="auto" class="heading" id="右偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F_&quot;右偏的直接链接&quot;)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>右偏<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F" rel="noopener" class="external-link" title="右偏的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F" target="_blank">​</a></h3><div class="heading-children"><div><p dir="auto">小车或机器人左偏时角度为正数；</p></div><div><p dir="auto">画面图片：</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151428.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151428.png"></div><p dir="auto"></p></div><div><p dir="auto">终端结果：</p></div><div><p dir="auto"></p><div src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151443.png" class="internal-embed media-embed image-embed is-loaded"><img src="知识库/电赛/openmv/k210/photo/pasted-image-20240629151443.png"></div><p dir="auto"></p></div><div class="mod-footer"></div></div></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#巡线"><div class="tree-item-contents heading-link" heading-name="巡线"><span class="tree-item-title">巡线</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#前言[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80_&quot;前言的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="前言[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80 &quot;前言的直接链接&quot;)"><span class="tree-item-title">前言<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80" rel="noopener" class="external-link" title="前言的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%89%8D%E8%A8%80" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#实验目的[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84_&quot;实验目的的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="实验目的[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84 &quot;实验目的的直接链接&quot;)"><span class="tree-item-title">实验目的<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84" rel="noopener" class="external-link" title="实验目的的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#实验讲解[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3_&quot;实验讲解的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="实验讲解[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3 &quot;实验讲解的直接链接&quot;)"><span class="tree-item-title">实验讲解<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3" rel="noopener" class="external-link" title="实验讲解的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E8%AE%B2%E8%A7%A3" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#find_blobs对象[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1_&quot;find_blobs对象的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="find_blobs对象[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1 &quot;find_blobs对象的直接链接&quot;)"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">find_blobs对象<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1" rel="noopener" class="external-link" title="find_blobs对象的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#find_blobs%E5%AF%B9%E8%B1%A1" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#构造函数"><div class="tree-item-contents heading-link" heading-name="构造函数"><span class="tree-item-title">构造函数</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#使用方法[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95_&quot;使用方法的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="使用方法[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95 &quot;使用方法的直接链接&quot;)"><span class="tree-item-title">使用方法<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" rel="noopener" class="external-link" title="使用方法的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#参考代码"><div class="tree-item-contents heading-link" heading-name="参考代码"><span class="tree-item-title">参考代码</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#实验结果[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C_&quot;实验结果的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="实验结果[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C &quot;实验结果的直接链接&quot;)"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">实验结果<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C" rel="noopener" class="external-link" title="实验结果的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#无偏移[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB_&quot;无偏移的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="无偏移[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB &quot;无偏移的直接链接&quot;)"><span class="tree-item-title">无偏移<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB" rel="noopener" class="external-link" title="无偏移的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E6%97%A0%E5%81%8F%E7%A7%BB" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#左偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F_&quot;左偏的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="左偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F &quot;左偏的直接链接&quot;)"><span class="tree-item-title">左偏<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F" rel="noopener" class="external-link" title="左偏的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%B7%A6%E5%81%8F" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="知识库\电赛\openmv\k210\01科技巡线例程.html#右偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F_&quot;右偏的直接链接&quot;)"><div class="tree-item-contents heading-link" heading-name="右偏[​](https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F &quot;右偏的直接链接&quot;)"><span class="tree-item-title">右偏<a data-tooltip-position="top" aria-label="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F" rel="noopener" class="external-link" title="右偏的直接链接" href="https://wiki.01studio.cc/docs/canmv_k210/machine_vision/line_follow#%E5%8F%B3%E5%81%8F" target="_blank">​</a></span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>